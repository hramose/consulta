$(function(){function t(){window.navigator.geolocation.getCurrentPosition(a)}function a(t){$('input[name="lat"]').val(t.coords.latitude),$('input[name="lon"]').val(t.coords.longitude);var a=$('select[name="speciality"]').val();void 0===a||""!=a?$("form").submit():alert("Selecciona una especialidad")}var n={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.Android()||n.BlackBerry()||n.iOS()||n.Opera()||n.Windows()}},o=$("html, body");$(window).on("load",function(){var t="#no-more-tables";if("undefined"!=typeof $(t)&&$(t).length>0){var a="";t.indexOf("#")!=-1&&(a=t.substring(t.lastIndexOf("#"))),a.length>0&&(o.animate({scrollTop:$(a).offset().top-80},500,function(){window.location.hash=a}),e.preventDefault())}}),n.any()?($(".box-create-appointment").hide(),$(".breadcrumb").hide()):$(".box-search-filters").removeClass("collapsed-box"),$(".dropdown-toggle").dropdown(),$(".btn-geo").on("click",function(a){t()}),$(".callout button.close").on("click",function(t){$(this).parents(".callout").hide()});var i=$("select[name=province]"),r=$("select[name=canton]"),l=$("select[name=district]"),d=window.provincias,s=[],c=$("input[name=selectedCanton]").val(),p=$("input[name=selectedDistrict]").val();r.empty(),l.empty(),i.change(function(){var t=$(this);r.empty(),$.each(d,function(a,n){n.title==t.val()&&(r.append('<option value=""></option>'),$.each(n.cantones,function(t,a){var n=new Option(a.title,a.title);a.title==c&&(n.selected=!0),r.append(n),s.push(a)}),r.change())})}),r.change(function(){var t=$(this);l.empty(),$.each(s,function(a,n){n.title==t.val()&&(l.append('<option value=""></option>'),$.each(n.distritos,function(t,a){var n=new Option(a,a);a==p&&(n.selected=!0),l.append(n)}))})}),i.change(),$("#myModal").on("shown.bs.modal",function(t){var a=$(t.relatedTarget),e=a.attr("data-lat"),o=a.attr("data-lon"),i=a.attr("data-address"),r=["email","twitter","facebook","googleplus","whatsapp"];n.any()||(r=["email","twitter","facebook","googleplus"]),$(".share").jsSocials({shares:r,url:"http://maps.google.com/?saddr=Current+Location&daddr="+e+","+o,text:i,showLabel:!1,showCount:!1,shareIn:"popup"})}),$("#locationModal").on("shown.bs.modal",function(t){var a=$(t.relatedTarget),n=a.attr("data-lat"),e=a.attr("data-lon"),o=a.attr("data-phone");o?($(this).find(".modal-body").html('Llamar: <a href="tel:'+o+'" title="Llamar a este número">'+o+"</a>"),$(this).find(".modal-title").html("Número de teléfono de contacto")):n&&e?$(this).find(".modal-body").append('<a href="waze://?ll='+n+","+e+'&amp;navigate=yes"  target="_blank" class="btn btn btn-app"><i class="fa fa-map-marker"></i> <strong>Abrir en Waze</strong></a><a href="http://maps.google.com/?saddr=Current+Location&daddr='+n+","+e+'" target="_blank" class="btn btn btn-app"><i class="fa fa-map-marker"></i> <strong>Abrir en Google Maps</strong></a>'):$(this).find(".modal-body").html("<p>No se puede abrir ninguna direccion por que el consultorio no tiene registrado su latitud o longitud</p>")})});