$(function(){function a(a){var t=a.coords;$(".loader-geo").addClass("hide"),$('input[name="lat"]').val(t.latitude),$('input[name="lon"]').val(t.longitude);var e=$('select[name="speciality"]').val();void 0===e||""!=e?$(".btn-search").click():alert("Selecciona una especialidad")}function t(a){$(".loader-geo").addClass("hide")}var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}},n=$("html, body");$(window).on("load",function(){var a="#no-more-tables";if("undefined"!=typeof $(a)&&$(a).length>0){var t="";a.indexOf("#")!=-1&&(t=a.substring(a.lastIndexOf("#"))),t.length>0&&n.animate({scrollTop:$(t).offset().top-80},500,function(){window.location.hash=t})}}),e.any()&&($(".box-create-appointment").hide(),$(".breadcrumb").hide()),$(".dropdown-toggle").dropdown(),$(".btn-geo").on("click",function(e){var n={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};$(".loader-geo").removeClass("hide"),window.navigator.geolocation.getCurrentPosition(a,t,n)}),$(".callout button.close").on("click",function(a){$(this).parents(".callout").hide()});var o=$("select[name=province]"),i=$("select[name=canton]"),r=$("select[name=district]"),l=window.provincias,d=[],c=$("input[name=selectedCanton]").val(),s=$("input[name=selectedDistrict]").val();i.empty(),r.empty(),o.change(function(){var a=$(this);i.empty(),$.each(l,function(t,e){e.title==a.val()&&(i.append('<option value=""></option>'),$.each(e.cantones,function(a,t){var e=new Option(t.title,t.title);t.title==c&&(e.selected=!0),i.append(e),d.push(t)}),i.change())})}),i.change(function(){var a=$(this);r.empty(),$.each(d,function(t,e){e.title==a.val()&&(r.append('<option value=""></option>'),$.each(e.distritos,function(a,t){var e=new Option(t,t);t==s&&(e.selected=!0),r.append(e)}))})}),o.change(),$("#myModal").on("shown.bs.modal",function(a){var t=$(a.relatedTarget),n=t.attr("data-lat"),o=t.attr("data-lon"),i=t.attr("data-address"),r=["email","twitter","facebook","googleplus","whatsapp"];e.any()||(r=["email","twitter","facebook","googleplus"]),$(".share").jsSocials({shares:r,url:"http://maps.google.com/?saddr=Current+Location&daddr="+n+","+o,text:i,showLabel:!1,showCount:!1,shareIn:"popup"})}),$("#locationModal").on("shown.bs.modal",function(a){var t=$(a.relatedTarget),e=t.attr("data-lat"),n=t.attr("data-lon"),o=t.attr("data-phone");o?($(this).find(".modal-body").html('Llamar: <a href="tel:'+o+'" title="Llamar a este número">'+o+"</a>"),$(this).find(".modal-title").html("Número de teléfono de contacto")):e&&n?$(this).find(".modal-body").append('<a href="waze://?ll='+e+","+n+'&amp;navigate=yes"  target="_blank" class="btn btn btn-app"><i class="fa fa-map-marker"></i> <strong>Abrir en Waze</strong></a><a href="http://maps.google.com/?saddr=Current+Location&daddr='+e+","+n+'" target="_blank" class="btn btn btn-app"><i class="fa fa-map-marker"></i> <strong>Abrir en Google Maps</strong></a>'):$(this).find(".modal-body").html("<p>No se puede abrir ninguna direccion por que el consultorio no tiene registrado su latitud o longitud</p>")})});